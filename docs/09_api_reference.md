# API Reference (n8n)

Base URL (local):

```
http://localhost:5678/webhook/
```

## Get Config

```
GET /config?section=hourly
```

Example response:

```json
{
  "success": true,
  "status_code": 200,
  "data": {
    "lat": 108.2208,
    "long": 108.2208,
    "total_plant_capacity": 38,
    "turbine_number": 7,
    "power_curve": "[ (0.0, 0.0), (2.5, 22.99), (3.0, 96.91), (3.5, 201.84), (4.0, 331.78), (4.5, 491.62), (5.0, 689.27), (5.5, 927.72), (6.0, 1212.8), (6.5, 1546.49), (7.0, 1930.59), (7.5, 2364.15), (8.0, 2842.86), (8.5, 3349.47), (9.0, 3856.83), (9.5, 4333.08), (10.0, 4732.37), (10.5, 5014.26), (11.0, 5186.42), (11.5, 5287.83), (12.0, 5337.37), (12.5, 5374.41), (13.0, 5392.43), (13.5, 5397.84), (14.0, 5400.0), (14.5, 5400.0), (15.0, 5400.0), (15.5, 5400.0), (16.0, 5400.0), (16.5, 5400.0), (17.0, 5394.6), (17.5, 5394.6), (18.0, 5378.22), (18.5, 5365.23), (19.0, 5319.86), (19.5, 5208.02), (20.0, 4980.81), (20.5, 4659.64), (21.0, 4293.96), (21.5, 3902.44), (22.0, 3499.51), (22.5, 3090.68), (23.0, 2753.12), (23.5, 2486.95), (24.0, 2235.84), ]"
  }
}
```

## Set Config

```
POST /config
```

Example request:

```json
{
  "lat": 16.0678,
  "long": 108.2208,
  "total_plant_capacity": 38,
  "turbine_number": 7,
  "power_curve": "[ (0.0, 0.0), (2.5, 22.99), (3.0, 96.91), (3.5, 201.84), (4.0, 331.78), (4.5, 491.62), (5.0, 689.27), (5.5, 927.72), (6.0, 1212.8), (6.5, 1546.49), (7.0, 1930.59), (7.5, 2364.15), (8.0, 2842.86), (8.5, 3349.47), (9.0, 3856.83), (9.5, 4333.08), (10.0, 4732.37), (10.5, 5014.26), (11.0, 5186.42), (11.5, 5287.83), (12.0, 5337.37), (12.5, 5374.41), (13.0, 5392.43), (13.5, 5397.84), (14.0, 5400.0), (14.5, 5400.0), (15.0, 5400.0), (15.5, 5400.0), (16.0, 5400.0), (16.5, 5400.0), (17.0, 5394.6), (17.5, 5394.6), (18.0, 5378.22), (18.5, 5365.23), (19.0, 5319.86), (19.5, 5208.02), (20.0, 4980.81), (20.5, 4659.64), (21.0, 4293.96), (21.5, 3902.44), (22.0, 3499.51), (22.5, 3090.68), (23.0, 2753.12), (23.5, 2486.95), (24.0, 2235.84), ]",
  "section": "hourly"
}
```

Example response:

```json
{
  "success": true,
  "status_code": 200,
  "data": ""
}
```

## Login

```
POST /login
```

Example request:

```json
{
  "username": "admin",
  "password": "admin"
}
```

Example response:

```json
{
  "success": true,
  "status_code": 200,
  "data": ""
}
```

Not match:

```json
{
  "success": false,
  "status_code": 404,
  "data": ""
}
```

## Register User

```
POST /register
```

Example request:

```json
{
  "username": "admin1",
  "password": "admin"
}
```

Example response:

```json
{
  "success": true,
  "status_code": 200,
  "data": ""
}
```

Already exists:

```json
{
  "success": false,
  "status_code": 409,
  "data": ""
}
```

## Calculate Power

```
POST /calc-power
```

Example request:

```json
{
  "lat": 16.0678,
  "long": 108.2208,
  "turbine_number": 7,
  "power_curve": "[ (0.0, 0.0), (2.5, 22.99), (3.0, 96.91), (3.5, 201.84), (4.0, 331.78), (4.5, 491.62), (5.0, 689.27), (5.5, 927.72), (6.0, 1212.8), (6.5, 1546.49), (7.0, 1930.59), (7.5, 2364.15), (8.0, 2842.86), (8.5, 3349.47), (9.0, 3856.83), (9.5, 4333.08), (10.0, 4732.37), (10.5, 5014.26), (11.0, 5186.42), (11.5, 5287.83), (12.0, 5337.37), (12.5, 5374.41), (13.0, 5392.43), (13.5, 5397.84), (14.0, 5400.0), (14.5, 5400.0), (15.0, 5400.0), (15.5, 5400.0), (16.0, 5400.0), (16.5, 5400.0), (17.0, 5394.6), (17.5, 5394.6), (18.0, 5378.22), (18.5, 5365.23), (19.0, 5319.86), (19.5, 5208.02), (20.0, 4980.81), (20.5, 4659.64), (21.0, 4293.96), (21.5, 3902.44), (22.0, 3499.51), (22.5, 3090.68), (23.0, 2753.12), (23.5, 2486.95), (24.0, 2235.84), ]"
}
```

Example response:

```json
{
  "success": true,
  "status_code": 200,
  "data": [
    {
      "wind_speed_ms": 0.92,
      "power_mw": 0.05922223999999999,
      "power_kw": 59.222239999999985
    },
    {
      "wind_speed_ms": 0.91,
      "power_mw": 0.05857852000000001,
      "power_kw": 58.57852000000001
    }
  ]
}
```
